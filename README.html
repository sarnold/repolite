

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>repolite: a dependency manager for working with git repos &mdash; repolite 0.6.4 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=73d9a94e"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="repolite" href="api/modules.html" />
    <link rel="prev" title="Welcome to the repolite documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            repolite
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">repolite: a dependency manager for working with git repos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#quick-start">Quick Start</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#os-package-install">OS Package Install</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#install-with-pip">Install with pip</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration-settings">Configuration settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dev-tools">Dev tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Tox</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pre-commit">Pre-commit</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#sbom-and-license-info">SBOM and license info</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#commands">Commands</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">repolite</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">repolite</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">repolite: a dependency manager for working with git repos</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/README.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="repolite-a-dependency-manager-for-working-with-git-repos">
<h1>repolite: a dependency manager for working with git repos<a class="headerlink" href="#repolite-a-dependency-manager-for-working-with-git-repos" title="Link to this heading"></a></h1>
<p>A lightweight tool to manage a small set of project dependencies without a
manifest.xml file or git submodules. You get to write (local) project config
files in yaml instead.</p>
<p><a class="reference external" href="https://github.com/sarnold/repolite/actions/workflows/ci.yml"><img alt="CI Status" src="https://github.com/sarnold/repolite/actions/workflows/ci.yml/badge.svg" /></a> <a class="reference external" href="https://github.com/sarnold/repolite/actions/workflows/wheels.yml"><img alt="Wheel Status" src="https://github.com/sarnold/repolite/actions/workflows/wheels.yml/badge.svg" /></a> <a class="reference external" href="https://github.com/sarnold/repolite/actions/workflows/release.yml"><img alt="Release Status" src="https://github.com/sarnold/repolite/actions/workflows/release.yml/badge.svg" /></a> <a class="reference external" href="https://github.com/sarnold/repolite/actions/workflows/bandit.yml"><img alt="Security check - Bandit" src="https://github.com/sarnold/repolite/actions/workflows/bandit.yml/badge.svg" /></a></p>
<p><a class="reference external" href="https://github.com/pre-commit/pre-commit"><img alt="pre-commit" src="https://img.shields.io/badge/pre--commit-enabled-brightgreen?logo=pre-commit&amp;logoColor=white" /></a> <a class="reference external" href="https://github.com/sarnold/repolite/actions/workflows/coverage.yml"><img alt="Test coverage" src="https://raw.githubusercontent.com/sarnold/repolite/badges/master/test-coverage.svg" /></a> <a class="reference external" href="https://github.com/sarnold/repolite/actions/workflows/pylint.yml"><img alt="Pylint Score" src="https://raw.githubusercontent.com/sarnold/repolite/badges/master/pylint-score.svg" /></a></p>
<p><a class="reference external" href="https://github.com/sarnold/repolite/releases"><img alt="GitHub tag" src="https://img.shields.io/github/v/tag/sarnold/repolite?color=green&amp;include_prereleases&amp;label=latest%20release" /></a> <a class="reference external" href="https://github.com/sarnold/repolite/blob/master/LICENSE"><img alt="License (static)" src="https://img.shields.io/badge/license-LGPL_2.1-blue" /></a> <a class="reference external" href="https://www.python.org/downloads/"><img alt="Python" src="https://img.shields.io/badge/python-3.6+-blue.svg" /></a></p>
<p>Example consumer repos include:</p>
<ul class="simple">
<li><p>SCAP Security Guide <a class="reference external" href="https://github.com/VCTLabs/scap-workbench/blob/v1-2/.repolite.yml">(SSG) workflows</a></p></li>
<li><p><a class="reference external" href="https://github.com/sarnold/u-boot-ATF-manifest/blob/marvell-armada/.repolite-locked.yml">ARM64 u-boot analysis</a></p></li>
<li><p>Structured <a class="reference external" href="https://github.com/VCTLabs/software_design_description_template/blob/master/.repolite.yml">(RST) document development</a></p></li>
<li><p>Asterisk* <a class="reference external" href="https://github.com/VCTLabs/vct-asterisk-dev-artifacts/blob/develop/.repolite.yml">interface evaluation</a></p></li>
<li><p>sysstat <a class="reference external" href="https://github.com/sarnold/sar-graph-artifacts/blob/main/.repolite.yml">graphing tool evaluation</a></p></li>
</ul>
<p>The latest new/expanded workflow features now include:</p>
<ul class="simple">
<li><p><strong>tagging support</strong> - tag a set of enabled repositories via config file or
command line</p></li>
<li><p><strong>changelog support</strong> in <code class="docutils literal notranslate"><span class="pre">rSt</span></code> or <code class="docutils literal notranslate"><span class="pre">md</span></code> - generate changelog documents
for enabled repositories</p></li>
</ul>
<p>See the optional feature keys in <a class="reference internal" href="#usage">Usage</a> for more info.</p>
<p>Repolite is tested on the 3 primary GH runner platforms, so as long as you
have a new-ish Python and a <code class="docutils literal notranslate"><span class="pre">git</span></code> binary it should run on your platform
(meaning as long as <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">git</span></code> succeeds there’s a good chance it will
Just Work).</p>
<section id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Link to this heading"></a></h2>
<p>Repolite is mainly configuration-driven via YAML config files; the included
example can be displayed and copied via command-line options (see the <a class="reference internal" href="#usage">Usage</a>
section below).  To create your own configuration, you need your repository
metadata and some ancillary info (see <a class="reference internal" href="#configuration-settings">Configuration settings</a> for more
details).</p>
<p>Once installed, running <code class="docutils literal notranslate"><span class="pre">repolite</span></code> without any local configuration file
will use the (internal) example configuration, ie, running it without any
arguments will clone the example repos to a subdirectory <code class="docutils literal notranslate"><span class="pre">ext/</span></code> in the
current directory.</p>
<p>By default (with no options) <code class="docutils literal notranslate"><span class="pre">repolite</span></code> will clone all the repositories
in the configuration file and checkout each configured branch.  From there
you can build and test, add more tests/features, until you need to update
your dependencies or switch branches.  At that point (or any time), run
<code class="docutils literal notranslate"><span class="pre">repolite</span></code> with the <code class="docutils literal notranslate"><span class="pre">--update</span></code> option to pull in upstream changes
and/or switch branches.</p>
<p>To create your own default config file in the working directory, the local
copy must be named <code class="docutils literal notranslate"><span class="pre">.repolite.yml</span></code>.  To get a copy of the example
configuration file, do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd path/to/work/dir/
$ repolite --save-config
$ $EDITOR .repolite.yml
$ repolite --dump-config  # you should see your config settings
</pre></div>
</div>
<p>If needed, you can also create additional project-level config files to
override your default project configuration. These alternate config files
can have arbitrary names (ending in ‘.yml’ or ‘.yaml’) but we recommend
using something like <code class="docutils literal notranslate"><span class="pre">repo-dev-myproject.yml</span></code> or similar. Since only one
configuration can be “active”, the non-default config file must be set
via the environment variable <code class="docutils literal notranslate"><span class="pre">REPO_CFG</span></code>, eg:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ repolite --dump-config &gt; repo-develop.yml
$ $EDITOR repo-develop.yml  # set alternate branches, other options
$ REPO_CFG=&quot;repo-develop.yml&quot; repolite --update
</pre></div>
</div>
<section id="os-package-install">
<h3>OS Package Install<a class="headerlink" href="#os-package-install" title="Link to this heading"></a></h3>
<p>Packages are available for <a class="reference external" href="https://launchpad.net/~nerdboy/+archive/ubuntu/embedded">Ubuntu</a>, and the latest can be installed on
Gentoo using <code class="docutils literal notranslate"><span class="pre">portage</span></code> (or the ebuilds in <a class="reference external" href="https://github.com/VCTLabs/embedded-overlay/">this portage overlay</a>).
To build from source, see the <a class="reference internal" href="#dev-tools">Dev tools</a> section below.</p>
<section id="prerequisites">
<h4>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading"></a></h4>
<p>A supported Linux distribution, mainly something that uses either
<code class="docutils literal notranslate"><span class="pre">.ebuilds</span></code> (eg, Gentoo or funtoo) or <code class="docutils literal notranslate"><span class="pre">.deb</span></code> packages, starting with at
least Ubuntu bionic or Debian stretch (see the above PPA package repo
on Launchpad).</p>
<p>On Gentoo, just install the package: <code class="docutils literal notranslate"><span class="pre">emerge</span> <span class="pre">dev-util/repolite</span></code> otherwise
on Ubuntu bionic or newer, follow the steps below.</p>
<p>Make sure you have the <code class="docutils literal notranslate"><span class="pre">add-apt-repository</span></code> command installed and
then add the PPA:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get install software-properties-common
$ sudo add-apt-repository -y -s ppa:nerdboy/embedded
$ sudo apt-get install python3-repolite
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since the package series currently published are for bionic/focal,
building from source is recommended if installing on Debian.</p>
</div>
<p>If you get a key error you will also need to manually import the PPA
signing key like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys &lt;PPA_KEY&gt;
</pre></div>
</div>
<p>where &lt;PPA_KEY&gt; is the key shown in the launchpad PPA page under “Adding
this PPA to your system”, eg, <code class="docutils literal notranslate"><span class="pre">41113ed57774ed19</span></code> for <a class="reference external" href="https://launchpad.net/~nerdboy/+archive/ubuntu/embedded">Embedded device ppa</a>.</p>
</section>
</section>
<section id="install-with-pip">
<h3>Install with pip<a class="headerlink" href="#install-with-pip" title="Link to this heading"></a></h3>
<p>This package is <em>not</em> yet published on PyPI, thus use one of the
following to install the latest repolite on any platform:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install git+https://github.com/sarnold/repolite@master
</pre></div>
</div>
<p>or use this command to install a specific version from source:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install git+https://github.com/sarnold/repolite.git@0.4.2
</pre></div>
</div>
<p>If you have a <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> file, you can add something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">repolite</span> <span class="o">@</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">sarnold</span><span class="o">/</span><span class="n">repolite</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="n">download</span><span class="o">/</span><span class="mf">0.4.2</span><span class="o">/</span><span class="n">repolite</span><span class="o">-</span><span class="mf">0.4.2</span><span class="o">-</span><span class="n">py3</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="nb">any</span><span class="o">.</span><span class="n">whl</span>
</pre></div>
</div>
<p>or even this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">repolite</span> <span class="o">@</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">sarnold</span><span class="o">/</span><span class="n">repolite</span><span class="o">/</span><span class="n">archive</span><span class="o">/</span><span class="n">refs</span><span class="o">/</span><span class="n">heads</span><span class="o">/</span><span class="n">master</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
<p>The full package provides the <code class="docutils literal notranslate"><span class="pre">repolite</span></code> executable as well as
an example configuration file that provides defaults for all values.</p>
<p>If you’d rather work from the source repository, it supports the common
idiom to install it on your system in a virtual env after cloning:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 -m venv env
$ source env/bin/activate
$ pip install .
$ repolite --version
$ repolite --dump-config
$ deactivate
</pre></div>
</div>
<p>The alternative to python venv is the <code class="docutils literal notranslate"><span class="pre">tox</span></code> test driver.  If you have it
installed already, see the example <a class="reference external" href="https://github.com/tox-dev/tox">tox</a> commands below.</p>
</section>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h2>
<p>The current version supports minimal command options and there are no
required arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(dev) user@host repolite (main) $ repolite -h
usage: repolite [-h] [--version] [-v] [-q] [-D] [-S] [-i] [-u] [-s] [-a] [-g] [-l]
                [TAG]

Manage local (git) dependencies (default: clone and checkout)

positional arguments:
  TAG                Optional tag string override (apply with -a) (default: None)

options:
  -h, --help         show this help message and exit
  --version          show program&#39;s version number and exit
  -v, --verbose      Display more processing info (default: False)
  -q, --quiet        Suppress output from git command (default: False)
  -D, --dump-config  Dump default configuration file to stdout (default: False)
  -S, --save-config  Save active config to default filename (.ymltoxml.yml) and exit
                     (default: False)
  -i, --install      Install enabled repositories (python only) (default: False)
  -u, --update       Update existing/enabled repositories (default: False)
  -s, --show         Display current repository state (default: False)
  -a, --apply-tag    Apply the given tag (see TAG arg) or use one from config file
                     (default: False)
  -g, --changelog    Run gitchangelog in enabled repositories, create files in top_dir
                     (default: False)
  -l, --lock-config  Lock active configuration in new config file and checkout hashes
                     (default: False)
</pre></div>
</div>
<section id="configuration-settings">
<h3>Configuration settings<a class="headerlink" href="#configuration-settings" title="Link to this heading"></a></h3>
<p>Configuration keys for repository data:</p>
<dl class="field-list simple">
<dt class="field-odd">top_dir<span class="colon">:</span></dt>
<dd class="field-odd"><p>path to repository parent directory (global option)</p>
</dd>
<dt class="field-even">repo_name<span class="colon">:</span></dt>
<dd class="field-even"><p>full repository name</p>
</dd>
<dt class="field-odd">repo_alias<span class="colon">:</span></dt>
<dd class="field-odd"><p>alias (short name) for <code class="docutils literal notranslate"><span class="pre">repo_name</span></code></p>
</dd>
<dt class="field-even">repo_url<span class="colon">:</span></dt>
<dd class="field-even"><p>full repository url, eg, Github ssh or https URL</p>
</dd>
<dt class="field-odd">repo_depth<span class="colon">:</span></dt>
<dd class="field-odd"><p>full clone if 0, otherwise use the specified depth</p>
</dd>
<dt class="field-even">repo_remote<span class="colon">:</span></dt>
<dd class="field-even"><p>remote name (usually origin)</p>
</dd>
<dt class="field-odd">repo_opts<span class="colon">:</span></dt>
<dd class="field-odd"><p>reserved/not implemented</p>
</dd>
<dt class="field-even">repo_branch<span class="colon">:</span></dt>
<dd class="field-even"><p>git branch (used with checkout)</p>
</dd>
<dt class="field-odd">repo_hash<span class="colon">:</span></dt>
<dd class="field-odd"><p>git commit hash (used by <code class="docutils literal notranslate"><span class="pre">lock-config</span></code> option)</p>
</dd>
<dt class="field-even">repo_enable<span class="colon">:</span></dt>
<dd class="field-even"><p>if false, ignore repository</p>
</dd>
</dl>
<p>Configuration keys for optional extra features/behavior:</p>
<dl class="field-list simple">
<dt class="field-odd">pull_with_rebase<span class="colon">:</span></dt>
<dd class="field-odd"><p>global option, useful when upstream history gets rewritten
and fast-forward pull fails (see repo-level option)</p>
</dd>
<dt class="field-even">repo_use_rebase<span class="colon">:</span></dt>
<dd class="field-even"><p>same as above, but per-repository instead of global</p>
</dd>
<dt class="field-odd">repo_has_lfs_files<span class="colon">:</span></dt>
<dd class="field-odd"><p>if true, runs <code class="docutils literal notranslate"><span class="pre">git-lfs</span> <span class="pre">install</span></code> after cloning
(requires <code class="docutils literal notranslate"><span class="pre">git-lfs</span></code> to be installed first)</p>
</dd>
<dt class="field-even">repo_init_submodules<span class="colon">:</span></dt>
<dd class="field-even"><p>if true, initialize/update git submodules in that repository</p>
</dd>
<dt class="field-odd">repo_install<span class="colon">:</span></dt>
<dd class="field-odd"><p>if true, try to install the repo with <a class="reference external" href="https://packaging.python.org/en/latest/key_projects/#pip">pip</a></p>
</dd>
<dt class="field-even">repo_changelog_ext<span class="colon">:</span></dt>
<dd class="field-even"><p>changelog file extension (default: <code class="docutils literal notranslate"><span class="pre">rst</span></code>)</p>
</dd>
<dt class="field-odd">repo_changelog_base<span class="colon">:</span></dt>
<dd class="field-odd"><p>base version to use for changelog data</p>
</dd>
<dt class="field-even">repo_gen_changes<span class="colon">:</span></dt>
<dd class="field-even"><p>if true, generate changelog file in <code class="docutils literal notranslate"><span class="pre">top_dir</span></code></p>
</dd>
</dl>
<p>Configuration keys that change repository state:</p>
<dl class="field-list simple">
<dt class="field-odd">repo_create_tag_msg<span class="colon">:</span></dt>
<dd class="field-odd"><p>default tag message text</p>
</dd>
<dt class="field-even">repo_create_tag_new<span class="colon">:</span></dt>
<dd class="field-even"><p>create new tag using string value</p>
</dd>
<dt class="field-odd">repo_create_tag_annotated<span class="colon">:</span></dt>
<dd class="field-odd"><p>create an annotated tag (no signature)</p>
</dd>
<dt class="field-even">repo_create_tag_signed<span class="colon">:</span></dt>
<dd class="field-even"><p>create a signed tag (requires GPG key)</p>
</dd>
<dt class="field-odd">repo_push_new_tags<span class="colon">:</span></dt>
<dd class="field-odd"><p>whether or not to push newly created tags</p>
</dd>
<dt class="field-even">repo_signing_key<span class="colon">:</span></dt>
<dd class="field-even"><p>GPG signing key (requires trailing ‘!’ if using a subkey)</p>
</dd>
</dl>
<p>Notes:</p>
<ul class="simple">
<li><p>if your <a class="reference external" href="https://github.com/sarnold/gitchangelog">gitchangelog</a> config uses Markdown, set <code class="docutils literal notranslate"><span class="pre">repo_changelog_ext</span></code> to
<code class="docutils literal notranslate"><span class="pre">md</span></code> instead of <code class="docutils literal notranslate"><span class="pre">rst</span></code></p></li>
<li><p>when tagging, tag from commandline is only used when config value is <code class="docutils literal notranslate"><span class="pre">null</span></code></p></li>
<li><p>when tagging, <code class="docutils literal notranslate"><span class="pre">create_tag_annotated</span></code> and <code class="docutils literal notranslate"><span class="pre">create_tag_signed</span></code> are
mutually exclusive, so only enable one of them</p></li>
<li><p>use <code class="docutils literal notranslate"><span class="pre">--lock-config</span></code> to create a new config file with git hashes, then
run that config later to reproduce a build using those hashes (this uses
the current active config as baseline)</p></li>
<li><p>use <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> to see more about what the tool is doing, eg, git
cmd strings</p></li>
<li><p>use <code class="docutils literal notranslate"><span class="pre">--quiet</span></code> to suppress most of the git output</p></li>
<li><p>we don’t create new branches; configured branches must already exist in
the remote repositories</p></li>
<li><p>use the appropriate clone URL for upstream projects; if you have commit
access, the ssh format is probably what you want</p></li>
<li><p>using a correctly configured <code class="docutils literal notranslate"><span class="pre">ssh-agent</span></code> can help save extra typing</p></li>
<li><p>you may want to add your <code class="docutils literal notranslate"><span class="pre">top_dir</span></code> path or default local config file
patterns to your <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> file</p></li>
</ul>
</section>
</section>
<section id="dev-tools">
<h2>Dev tools<a class="headerlink" href="#dev-tools" title="Link to this heading"></a></h2>
<p>Local tool dependencies to aid in development; install them for
maximum enjoyment.</p>
<section id="id1">
<h3>Tox<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>As long as you have git and at least Python 3.6, then you can install
and use <a class="reference external" href="https://github.com/tox-dev/tox">tox</a>.  After cloning the repository, you can run the repo
checks with the <code class="docutils literal notranslate"><span class="pre">tox</span></code> command.  It will build a virtual python
environment for each installed version of python with all the python
dependencies and run the specified commands, eg:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/sarnold/repolite
$ cd repolite/
$ tox -e py
</pre></div>
</div>
<p>The above will run the default test command using the (local) default
Python version.  To specify the Python version and host OS type, run
something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tox -e py39-linux
</pre></div>
</div>
<p>To build and check the Python package, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tox -e build,check
</pre></div>
</div>
<p>Full list of additional <code class="docutils literal notranslate"><span class="pre">tox</span></code> commands:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">dev</span></code> will build a python venv and install in editable mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">build</span></code> will build the python packages and run package checks</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">check</span></code> will install the wheel package from above</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">lint</span></code> will run <code class="docutils literal notranslate"><span class="pre">pylint</span></code> (somewhat less permissive than PEP8/flake8 checks)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">mypy</span></code> will run mypy import and type checking</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">style</span></code> will run flake8 style checks</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">sync</span></code> will install repolite in .sync and fetch the example repos</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">do</span></code> will run a repolite command from the .sync environment</p></li>
</ul>
<p>To build/lint the api docs, use the following tox commands:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">docs</span></code> will build the documentation using sphinx and the api-doc plugin</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">docs-lint</span></code> will run the sphinx doc-link checking</p></li>
</ul>
</section>
<section id="pre-commit">
<h3>Pre-commit<a class="headerlink" href="#pre-commit" title="Link to this heading"></a></h3>
<p>This repo is also <a class="reference external" href="https://pre-commit.com/index.html">pre-commit</a> enabled for python/rst source and file-type
linting. The checks run automatically on commit and will fail the commit
(if not clean) and perform simple file corrections.  For example, if the
mypy check fails on commit, you must first fix any fatal errors for the
commit to succeed. That said, pre-commit does nothing if you don’t install
it first (both the program itself and the hooks in your local repository
copy).</p>
<p>You will need to install pre-commit before contributing any changes;
installing it using your system’s package manager is recommended,
otherwise install with pip into your usual virtual environment using
something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo emerge pre-commit  --or--
$ pip install pre-commit
</pre></div>
</div>
<p>then install it into the repo you just cloned:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/sarnold/repolite
$ cd repolite/
$ pre-commit install
</pre></div>
</div>
<p>It’s usually a good idea to update the hooks to the latest version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pre-commit autoupdate
</pre></div>
</div>
<p>Most (but not all) of the pre-commit checks will make corrections for you,
however, some will only report errors, so these you will need to correct
manually.</p>
<p>Automatic-fix checks include black, isort, autoflake, and miscellaneous
file fixers. If any of these fail, you can review the changes with
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> and just add them to your commit and continue.</p>
<p>If any of the mypy, bandit, or rst source checks fail, you will get a report,
and you must fix any errors before you can continue adding/committing.</p>
<p>To see a “replay” of any <code class="docutils literal notranslate"><span class="pre">rst</span></code> check errors, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pre-commit run rst-backticks -a
$ pre-commit run rst-directive-colons -a
$ pre-commit run rst-inline-touching-normal -a
</pre></div>
</div>
<p>To run all <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> checks manually, try:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pre-commit run -a
</pre></div>
</div>
</section>
</section>
<section id="sbom-and-license-info">
<h2>SBOM and license info<a class="headerlink" href="#sbom-and-license-info" title="Link to this heading"></a></h2>
<p>This project is now compliant the REUSE Specification Version 3.3, so the
corresponding license information for all files can be found in the <code class="docutils literal notranslate"><span class="pre">REUSE.toml</span></code>
configuration file with license text(s) in the <code class="docutils literal notranslate"><span class="pre">LICENSES/</span></code> folder.</p>
<p>Related metadata can be (re)generated with the following tools and command
examples.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/fsfe/reuse-tool">reuse-tool</a> - <a class="reference external" href="https://reuse.software/spec-3.3/">REUSE</a> compliance linting and sdist (source files) SBOM generation</p></li>
<li><p><a class="reference external" href="https://github.com/anthonyharrison/sbom4python">sbom4python</a> - generate SBOM with full dependency chain</p></li>
</ul>
<section id="commands">
<h3>Commands<a class="headerlink" href="#commands" title="Link to this heading"></a></h3>
<p>Use tox to create the environment and run the lint command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tox -e reuse                      # --or--
$ tox -e reuse -- spdx &gt; sbom.txt   # generate sdist files sbom
</pre></div>
</div>
<p>Note you can pass any of the other reuse commands after the <code class="docutils literal notranslate"><span class="pre">--</span></code> above.</p>
<p>Use the above environment to generate the full SBOM in text format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ source .tox/reuse/bin/activate
$ sbom4python --system --use-pip -o &lt;file_name&gt;.txt
</pre></div>
</div>
<p>Be patient; the last command above may take several minutes. See the
doc links above for more detailed information on the tools and
specifications.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to the repolite documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api/modules.html" class="btn btn-neutral float-right" title="repolite" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Stephen L Arnold.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>